(function(e){function t(t){for(var a,c,r=t[0],o=t[1],u=t[2],m=0,d=[];m<r.length;m++)c=r[m],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&d.push(i[c][0]),i[c]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var o=n[r];0!==i[o]&&(a=!1)}a&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},i={app:0},s=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/simon-game-test-assignment/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var l=o;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"07c6":function(e,t,n){"use strict";n("af25")},"1b89":function(e,t,n){"use strict";n("38a6")},"21bb":function(e,t,n){e.exports=n.p+"media/simon-2.297c47c4.wav"},"38a6":function(e,t,n){},5674:function(e,t,n){"use strict";n("bd4d")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app-mount"}},[n("AppLayout",{scopedSlots:e._u([{key:"header",fn:function(){return[n("GameHeader")]},proxy:!0},{key:"footer",fn:function(){return[n("GameMenu",{on:{click:e.startGame}})]},proxy:!0}])},[n("SimonCircle",{attrs:{preventInput:!e.$game.state.isPlayerInput},on:{click:e.simonClickHandler}}),e.$game.state.isGameOver?n("GameOver",{on:{"try-again-click":e.tryAgain}}):e._e()],1)],1)},s=[],c=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("4fadc"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-layout"},[n("div",{staticClass:"app-header"},[e._t("header")],2),n("div",{staticClass:"app-main"},[e._t("default")],2),n("div",{staticClass:"app-footer"},[e._t("footer")],2)])}),r=[],o={name:"AppLayout"},u=o,l=(n("5dd9"),n("2877")),m=Object(l["a"])(u,c,r,!1,null,"48389932",null),d=m.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"game-header"},[n("h1",[e._v("Simon The Game")]),n("h3",[e._v("Round "+e._s(e.$game.state.round))]),n("h3",[e._v("Record "+e._s(e.$game.state.roundRecord))])])},p=[],v={name:"GameHeader"},h=v,g=(n("1b89"),Object(l["a"])(h,f,p,!1,null,"0ed9d0bd",null)),y=g.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"game-menu"},[n("UIButton",{attrs:{active:e.$game.state.level===e.$game.state.levelsDifficulty.easy.name},on:{click:function(t){return e.menuClickHandle(e.$game.state.levelsDifficulty.easy.name)}}},[e._v("EASY")]),n("UIButton",{attrs:{active:e.$game.state.level===e.$game.state.levelsDifficulty.medium.name},on:{click:function(t){return e.menuClickHandle(e.$game.state.levelsDifficulty.medium.name)}}},[e._v("MEDIUM")]),n("UIButton",{attrs:{active:e.$game.state.level===e.$game.state.levelsDifficulty.hard.name},on:{click:function(t){return e.menuClickHandle(e.$game.state.levelsDifficulty.hard.name)}}},[e._v("HARD")])],1)},b=[],_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",e._g({staticClass:"ui-button",class:{"ui-button__active":e.active},attrs:{type:"button"}},e.$listeners),[n("div",{staticClass:"ui-button__layout"},[n("div",{staticClass:"ui-button__content"},[e._t("default")],2)])])},S=[],k={name:"UIButton",props:{active:Boolean}},C=k,x=(n("07c6"),Object(l["a"])(C,_,S,!1,null,"3e2ae458",null)),O=x.exports,w={name:"GameMenu",components:{UIButton:O},methods:{menuClickHandle:function(e){this.$emit("click",e)}}},I=w,q=(n("5674"),Object(l["a"])(I,$,b,!1,null,"26433b9d",null)),G=q.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"simon-circle",class:{"simon-circle-interactive":!e.preventInput}},[n("div",{staticClass:"simon-sector-green",class:{"simon-circle-emit":e.$game.state.emitSectors.green},attrs:{"sector-id":"green"},on:{click:e.sectorClickHandle}}),n("div",{staticClass:"simon-sector-red",class:{"simon-circle-emit":e.$game.state.emitSectors.red},attrs:{"sector-id":"red"},on:{click:e.sectorClickHandle}}),n("div",{staticClass:"simon-sector-yellow",class:{"simon-circle-emit":e.$game.state.emitSectors.yellow},attrs:{"sector-id":"yellow"},on:{click:e.sectorClickHandle}}),n("div",{staticClass:"simon-sector-blue",class:{"simon-circle-emit":e.$game.state.emitSectors.blue},attrs:{"sector-id":"blue"},on:{click:e.sectorClickHandle}})])},H=[],P=void 0,M=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=P;return function(){if(!t){t=!0;for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];e.apply(a,s),setTimeout((function(){t=!1}),n)}}},A={name:"SimonCircle",props:{preventInput:{type:Boolean,default:!1}},created:function(){var e=this;this.sectorClickHandle=M((function(t){var n=t.target.getAttribute("sector-id");e.$props.preventInput||e.$emit("click",n)}),250)},value:function(){this.sectorClickHandle.apply(this,arguments)}},R=A,T=(n("76f8"),Object(l["a"])(R,j,H,!1,null,"6fc0209f",null)),D=T.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"game-over"},[n("div",{staticClass:"game-over-dialog"},[n("h1",[e._v("Игра окончена")]),n("p",[e._v("Раунд "+e._s(e.$game.state.round))]),n("UIButton",{on:{click:e.closeModalHandler}},[e._v("Повторить")])],1),n("div",{staticClass:"game-over__overlay"})])},B=[],U={name:"GameOver",components:{UIButton:O},methods:{closeModalHandler:function(e){this.$emit("try-again-click",e)}}},L=U,J=(n("e967"),Object(l["a"])(L,E,B,!1,null,"b1dbee9a",null)),z=J.exports,Y=function(e){return Math.floor(Math.random()*e)+1},F=new Map;F.set(1,"green"),F.set(2,"red"),F.set(3,"blue"),F.set(4,"yellow");var K={green:new Audio(n("d56c")),red:new Audio(n("21bb")),blue:new Audio(n("6329")),yellow:new Audio(n("6f8e"))},N={name:"App",components:{AppLayout:d,GameHeader:y,GameMenu:G,GameOver:z,SimonCircle:D},methods:{startGame:function(e){this.$game.state.level=e,this.$game.state.isGameStarted=!0,this.$game.state.isSequencePlay||(this.gameReset(),this.nextRound())},tryAgain:function(){var e=this;this.$game.state.isGameOver=!1,setTimeout((function(){e.startGame(e.$game.state.level)}),1e3)},playSequence:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.$game.state.isSequencePlay=!0;var n=Object.entries(this.$game.state.sequence),a=0,i=!1,s=function s(){var c=t/8,r=n[a][1],o=F.get(r);e.$game.state.emitSectors[o]=!0,e.playSound(o),a>=n.length-1&&(i=!0),new Promise((function(e){setTimeout((function(){e()}),t-c)})).then((function(){e.$game.state.emitSectors[o]=!1,a++,i?(e.$game.state.isSequencePlay=!1,e.$game.state.isPlayerInput=!0):setTimeout((function(){s()}),t+c)}))};!i&&this.$game.state.sequence.length&&setTimeout((function(){s()}),t)},playSound:function(e){K[e].currentTime=0,K[e].play()},simonClickHandler:function(e){this.playSound(e),this.checkInput(e)},checkInput:function(e){var t=0,n=this.$game.state.sequence,a=this.$game.state.playerSequenceIndex;F.forEach((function(n,a){e===n&&(t=a)})),t===n[a]?(this.$game.state.playerSequenceIndex++,this.$game.state.playerSequenceIndex===this.$game.state.sequence.length&&(this.$game.state.isPlayerInput=!1,this.nextRound())):(this.$game.state.isPlayerInput=!1,this.gameOver())},gameReset:function(){this.$game.state.round=0,this.$game.state.isGameOver=!1,this.$game.state.playerSequenceIndex=0,this.$game.state.sequenceIndex=0,this.$game.clearSequence(),this.$game.clearEmitSectors()},gameOver:function(){this.$game.state.isGameOver=!0},increaseRound:function(){this.$game.state.round++},nextRound:function(){var e=this,t=this.$game.getCurrentLevelDifficulty().timeout;this.$game.state.playerSequenceIndex=0,this.increaseRound(),this.pushToSequence(),this.$game.state.roundRecord=Math.max(this.$game.state.round,this.$game.state.roundRecord),setTimeout((function(){e.playSequence(t)}),1e3)},pushToSequence:function(){this.$game.state.sequenceIndex++;var e=Y(F.size);this.$game.state.sequence.push(e)}}},Q=N,V=(n("034f"),Object(l["a"])(Q,i,s,!1,null,null,null)),W=V.exports,X=n("d4ec"),Z=n("bee2"),ee=function(){function e(){Object(X["a"])(this,e),this.state=a["a"].observable({round:0,roundRecord:0,level:"",levelsDifficulty:{easy:{name:"easy",timeout:1500},medium:{name:"medium",timeout:1e3},hard:{name:"hard",timeout:400}},isGameStarted:!1,isGameOver:!1,isSequencePlay:!1,isPlayerInput:!1,sequenceIndex:0,sequence:[],playerSequenceIndex:0,emitSectors:{green:!1,red:!1,blue:!1,yellow:!1}})}return Object(Z["a"])(e,[{key:"getCurrentLevelDifficulty",value:function(){return this.state.levelsDifficulty[this.state.level]}},{key:"clearSequence",value:function(){this.state.sequence=[]}},{key:"clearEmitSectors",value:function(){this.state.emitSectors={green:!1,red:!1,blue:!1,yellow:!1}}}]),e}();a["a"].config.productionTip=!1,a["a"].config.devtools=!0,a["a"].prototype.$game=new ee,new a["a"]({render:function(e){return e(W)}}).$mount("#app-mount")},"58a8":function(e,t,n){},"5dd9":function(e,t,n){"use strict";n("676b")},"60aa":function(e,t,n){},6329:function(e,t,n){e.exports=n.p+"media/simon-3.21f1a2e8.wav"},"676b":function(e,t,n){},"6f8e":function(e,t,n){e.exports=n.p+"media/simon-4.3ec1b8b1.wav"},"76f8":function(e,t,n){"use strict";n("60aa")},"85ec":function(e,t,n){},af25:function(e,t,n){},bd4d:function(e,t,n){},d56c:function(e,t,n){e.exports=n.p+"media/simon-1.64a0f834.wav"},e967:function(e,t,n){"use strict";n("58a8")}});
//# sourceMappingURL=app.688ce46c.js.map